<!DOCTYPE html>
<html lang="fr">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="description" content="NY Minet3d" />
	<title>
		<%= htmlWebpackPlugin.options.title %>
	</title>
	<link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

	<script>
		var laques = [
			{
				"label": "laque 2",
				"name": "laque-2",
				"id": 1236,
				"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/07\/Capture-de\u0301cran-2017-12-05-a\u0300-18.26.31-1024x572-1.png",
				"texture_args": {
					"repeatX": 0.005,
					"repeatY": 0.005,
					"offsetX": 0.5,
					"offsetY": 0.5
				}
			},
			{
				"label": "laque test",
				"name": "laque-test",
				"id": 1234,
				"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/07\/portrait_Raoult.png",
				"texture_args": {
					"repeatX": 0.005,
					"repeatY": 0.005,
					"offsetX": 0.5,
					"offsetY": 0.5
				}
			}
		]

		var materials = [
			{
				"label": "Orme Tossini",
				"name": "orme-tossini",
				"id": 1301,
				"textures": {
					"hori": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/07\/hori-2.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					},
					"vert": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/07\/vert-2.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					},
					"metal": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/06\/miroir.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					},
					"fond": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/05\/cuir.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.05,
							"repeatY": 0.05,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					},
					"cuir": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/05\/cuir.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.05,
							"repeatY": 0.05,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					},
					"vitre": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/07\/vitre.png",
						"material_args": {
							"roughness": 0.45,
							"transparent": true,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					}
				}
			},
			{
				"label": "Blanc premium",
				"name": "blanc-premium",
				"id": 1304,
				"textures": {
					"hori": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/07\/hori-3.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					},
					"vert": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/07\/vert-3.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					},
					"cuir": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/05\/cuir.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					},
					"fond": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/05\/cuir.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					},
					"metal": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/06\/miroir.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					}
				}
			},
			{
				"label": "Fr\u00eane Navarra",
				"name": "frene-navarra",
				"id": 1297,
				"textures": {
					"hori": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/07\/hori-1.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					},
					"vert": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/07\/vert-1.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					},
					"cuir": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/05\/cuir.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					},
					"fond": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/05\/fond-3.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					},
					"metal": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/06\/miroir.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					}
				}
			},
			{
				"label": "Ch\u00eane Halifax naturel",
				"name": "chene-halifax-naturel",
				"id": 1293,
				"textures": {
					"hori": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/07\/hori.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					},
					"vert": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/07\/vert.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					},
					"cuir": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/05\/cuir.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					},
					"metal": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/06\/miroir.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					},
					"fond": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/05\/cuir.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					}
				}
			},
			{
				"label": "Ch\u00eane Halifax blanc",
				"name": "chene-halifax-blanc",
				"id": 517,
				"textures": {
					"hori": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/05\/hori-17.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					},
					"vert": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/05\/vert-4.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.005,
							"repeatY": 0.005
						}
					},
					"fond": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/05\/fond-3.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.03,
							"repeatY": 0.03,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					},
					"cuir": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/05\/cuir.jpg",
						"material_args": {
							"roughness": 0.45,
							"emissive": "#0D0D0D",
							"bumpScale": 2,
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.03,
							"repeatY": 0.03,
							"offsetX": 0.5,
							"offsetY": 0.5
						}
					},
					"metal": {
						"url": "https:\/\/kinotools.kinoki.fr\/minet3d\/wp-content\/uploads\/2021\/06\/miroir.jpg",
						"material_args": {
							"specular": "#ffffff",
							"emissive": "#0D0D0D",
							"fog": false
						},
						"texture_args": {
							"repeatX": 0.0001,
							"repeatY": 0.0001
						}
					}
				}
			}
		]

		var loadedDressingAtStart, catalogue

		load_dressing = function (url) {
			fetch(url).then(response => response.json()).then(json => local_scene_bridge('load_dressing', json));
		}

		fetch("catalogue.json").then(response => response.json()).then(json => catalogue = json);
		fetch("dressings/dressing-collision.json").then(response => response.json()).then(json => loadedDressingAtStart = json);

		kino_bridge = function (type, arg) {
			console.log("kino_bridge", type, arg)
		}
		local_scene_bridge = function (type, arg) {
			console.log("local_scene_bridge", type)
			switch (type) {
				case 'new_dressing':
				case 'load_dressing':
				case 'save_dressing':
				case 'download_dressing':
				case 'generateallpix':
				case 'take_picture':
					break;

				case 'add_meuble_to_scene':
					var sku = arg
					var selectItemList = document.getElementById("add-item-to-scene")
					var props = catalogue.find(f => f.sku === sku)
					if (props.accessoirescompatibles)
						props.accessoirescompatibles.forEach(element => {
							var opt = document.createElement('option');
							opt.value = element;
							opt.innerHTML = element;
							selectItemList.appendChild(opt);
						});
					break;

				case 'select_meuble':
					break;
				case 'edit_meuble':
					break;
				case 'remove_meuble':
					arg = true
					break;
				case 'set_scene_material':
					break;
				case 'brush_mode':
					break;
			}
			console.log("scene_bridge returns :", window.scene_bridge(type, arg))
		}
	</script>
</head>

<body style="margin: 0;height: 100vh;">

	<button class="btn" onclick="local_scene_bridge('new_dressing')">
		<i class="fa fa-file"></i>
	</button>

	<button class="btn" onclick="local_scene_bridge('save_dressing')">
		<i class="fa fa-save"></i>
	</button>

	<select id="load-dressing" onchange="load_dressing(this.value)">
		<option value="dressings/dressing-blot.json">Blots</option>
		<option value="dressings/dressing-corners.json">Corners</option>
		<option value="dressings/dressing-C231.json">C231</option>
		<option value="dressings/dressing-ang.json">Angles</option>
		<option value="dressings/dressing-collision.json">Collision</option>
	</select>

	<button class="btn" onclick="local_scene_bridge('download_dressing')" style="margin-right: 1em;">
		<i class="fa fa-download"></i>
	</button>


	<button class="btn" onclick="local_scene_bridge('take_picture')">
		<i class="fa fa-image"></i>
	</button>

	<button class="btn" onclick="local_scene_bridge('generateonepix','NYANGH219')">
		<i class="fa fa-image"></i>
	</button>

	<button class="btn" onclick="local_scene_bridge('generateallpix')" style="margin-right: 1em;">
		<i class="fa fa-clone"></i>
	</button>

	<button class="btn" onclick="local_scene_bridge('select_meuble')">
		<i class="fa fa-mouse-pointer"></i>
	</button>

	<button class="btn" onclick="local_scene_bridge('edit_meuble')">
		<i class="fa fa-hammer"></i>
	</button>

	<button class="btn" onclick="local_scene_bridge('brush_mode', 1234)">
		<i class="fa fa-paint-brush"></i>
	</button>

	<button class="btn" onclick="local_scene_bridge('brush_mode', 1236)" style="margin-right: 1em;">
		<i class="fa fa-paint-brush"></i>
	</button>

	<button class="btn" onclick="local_scene_bridge('set_scene_material', 517)">
		<i class="fa fa-palette"></i>
	</button>

	<select id="set-scene-material" onchange="local_scene_bridge('set_scene_material',parseInt(this.value))">
		<option value=1301>1301</option>
		<option value=1304>1304</option>
		<option value=1293>1293</option>
		<option value=1297>1297</option>
		<option value=517>517</option>
	</select>

	<button class="btn" onclick="local_scene_bridge('remove_meuble')" style="margin-right: 1em;">
		<i class="fa fa-trash"></i>
	</button>

	<select id="add-meuble-to-scene" onchange="local_scene_bridge('add_meuble_to_scene',this.value)">

		<option value="NYH238P62P40">NYH238P62P40</option>
		<option value="NYH238P62L096">NYH238P62L096</option>
		<option value="NYH238P62L081">NYH238P62L081</option>
		<option value="NYH238P62L059">NYH238P62L059</option>
		<option value="NYH238P62L048">NYH238P62L048</option>
		<option value="NYH238P62L040">NYH238P62L040</option>
		<option value="NYH238P40RL057">NYH238P40RL057</option>
		<option value="NYH238P40P62">NYH238P40P62</option>
		<option value="NYH238P40L119">NYH238P40L119</option>
		<option value="NYH238P40L096">NYH238P40L096</option>
		<option value="NYH238P40L081">NYH238P40L081</option>
		<option value="NYH238P40L059">NYH238P40L059</option>
		<option value="NYH238P40L048">NYH238P40L048</option>
		<option value="NYH238P40L040">NYH238P40L040</option>

		<option value="NYH219P62P40">NYH219P62P40</option>
		<option value="NYH219P62L096">NYH219P62L096</option>
		<option value="NYH219P62L081">NYH219P62L081</option>
		<option value="NYH219P62L059">NYH219P62L059</option>
		<option value="NYH219P62L048">NYH219P62L048</option>
		<option value="NYH219P62L040">NYH219P62L040</option>
		<option value="NYH219P40RL057">NYH219P40RL057</option>
		<option value="NYH219P40P62">NYH219P40P62</option>
		<option value="NYH219P40L119">NYH219P40L119</option>
		<option value="NYH219P40L096">NYH219P40L096</option>
		<option value="NYH219P40L081">NYH219P40L081</option>
		<option value="NYH219P40L059">NYH219P40L059</option>
		<option value="NYH219P40L048">NYH219P40L048</option>
		<option value="NYH219P40L040">NYH219P40L040</option>
	</select>


	<select id="add-item-to-scene" onchange="local_scene_bridge('add_meuble_to_scene',this.value)">

	</select>

	<!-- <div style="position:absolute;margin: 0;width: 600px;height: 400px;overflow: hidden;left:10px;top:30px; border:1px solid blue"
		id="view1" tabindex="1"></div>
	<div style="position:absolute;margin: 0;width: 600px;height: 400px;overflow: hidden;left:10px;top:500px; border:1px solid red"
		id="view2" tabindex="2"></div> -->
	<div style="margin: 0;width: 100%;height: 100%;overflow: hidden;" id="canvas-wrapper"></div>
</body>

</html>